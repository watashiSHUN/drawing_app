<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Data Viewer</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <h1>Data Viewer</h1>
        <div id="chart_container"></div><!--refactor chart to be its own html page -->
        <div id="container"></div>
        <script src="../data/dataset/js/features.js"></script>
        <script src="../common/constants_module.js"></script>
        <script src="../common/utils_module.js"></script>
        <script src="display_table.js"></script>
        <script src="../github/chart.js"></script>
        <script src="../github/graphics.js"></script>
        <script src="../github/math.js"></script>
        <!-- if we were to use google chart library:
        <script src="https://www.gstatic.com/charts/loader.js"></script>
        <script src="display_chart.js"></script> 
        -->

        <script>
            const {metadatas, feature_names} = features;
            // NOTE: variable `metadata` is available when we load metadata.js
            const student_drawings = utils.groupByKey(metadatas, "student_id");
            
            let row_count = 0;
            for (let student_id in student_drawings){
                const drawing_metadatas = student_drawings[student_id];
                const student_name = drawing_metadatas[0].student_name;
                createRow(/*div=*/container, student_name, drawing_metadatas);
                row_count++;
                if (row_count >= 50){
                    break;
                }
            }
            const style = {
                    car: {color: "red", text: "ğŸš—"},
                    fish: {color: "blue", text: "ğŸŸ"},
                    house: {color: "green", text: "ğŸ "},
                    tree: {color: "purple", text: "ğŸŒ³"},
                    bicycle: {color: "orange", text: "ğŸš´"},
                    guitar: {color: "brown", text: "ğŸ¸"},
                    pencil: {color: "black", text: "ğŸ“"},
                    clock: {color: "gray", text: "â°"}
                };

            const options = {
                size: constants.CANVAS_SIZE*3,
                axesLabels: feature_names,
                styles: style,
                transparency: 0.6,
                icon: "image",
                // TODO(shunxian): when we click on the item, 
                // it should highlight and display the drawing
            };

            graphics.generateImages(style);

            
            const chart = new Chart(chart_container, metadatas, options);
        </script>
    </body>